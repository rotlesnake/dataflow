(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["dataflow"]=e():t["dataflow"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"00ee":function(t,e,n){var r=n("b622"),o=r("toStringTag"),i={};i[o]="z",t.exports="[object z]"===String(i)},"0366":function(t,e,n){var r=n("1c0b");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},"057f":function(t,e,n){var r=n("fc6a"),o=n("241c").f,i={}.toString,c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return o(t)}catch(e){return c.slice()}};t.exports.f=function(t){return c&&"[object Window]"==i.call(t)?a(t):o(r(t))}},"06cf":function(t,e,n){var r=n("83ab"),o=n("d1e7"),i=n("5c6c"),c=n("fc6a"),a=n("a04b"),s=n("5135"),u=n("0cfb"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=c(t),e=a(e),u)try{return l(t,e)}catch(n){}if(s(t,e))return i(!o.f.call(t,e),t[e])}},"0b42":function(t,e,n){var r=n("861d"),o=n("e8b5"),i=n("b622"),c=i("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)?r(e)&&(e=e[c],null===e&&(e=void 0)):e=void 0),void 0===e?Array:e}},"0cfb":function(t,e,n){var r=n("83ab"),o=n("d039"),i=n("cc12");t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},"159b":function(t,e,n){var r=n("da84"),o=n("fdbc"),i=n("785a"),c=n("17c2"),a=n("9112"),s=function(t){if(t&&t.forEach!==c)try{a(t,"forEach",c)}catch(e){t.forEach=c}};for(var u in o)s(r[u]&&r[u].prototype);s(i)},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,o=n("a640"),i=o("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"1be4":function(t,e,n){var r=n("d066");t.exports=r("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,n){var r=n("b622"),o=r("iterator"),i=!1;try{var c=0,a={next:function(){return{done:!!c++}},return:function(){i=!0}};a[o]=function(){return this},Array.from(a,(function(){throw 2}))}catch(s){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var r={};r[o]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(s){}return n}},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1dde":function(t,e,n){var r=n("d039"),o=n("b622"),i=n("2d00"),c=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[],n=e.constructor={};return n[c]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"23cb":function(t,e,n){var r=n("a691"),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},"23e7":function(t,e,n){var r=n("da84"),o=n("06cf").f,i=n("9112"),c=n("6eeb"),a=n("ce4e"),s=n("e893"),u=n("94ca");t.exports=function(t,e){var n,l,f,d,h,p,y=t.target,m=t.global,v=t.stat;if(l=m?r:v?r[y]||a(y,{}):(r[y]||{}).prototype,l)for(f in e){if(h=e[f],t.noTargetGet?(p=o(l,f),d=p&&p.value):d=l[f],n=u(m?f:y+(v?".":"#")+f,t.forced),!n&&void 0!==d){if(typeof h===typeof d)continue;s(h,d)}(t.sham||d&&d.sham)&&i(h,"sham",!0),c(l,f,h,t)}}},"241c":function(t,e,n){var r=n("ca84"),o=n("7839"),i=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},"2a62":function(t,e,n){var r=n("825a");t.exports=function(t,e,n){var o,i;r(t);try{if(o=t["return"],void 0===o){if("throw"===e)throw n;return n}o=o.call(t)}catch(c){i=!0,o=c}if("throw"===e)throw n;if(i)throw o;return r(o),n}},"2d00":function(t,e,n){var r,o,i=n("da84"),c=n("342f"),a=i.process,s=i.Deno,u=a&&a.versions||s&&s.version,l=u&&u.v8;l?(r=l.split("."),o=r[0]<4?1:r[0]+r[1]):c&&(r=c.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=c.match(/Chrome\/(\d+)/),r&&(o=r[1]))),t.exports=o&&+o},"2f2c":function(t,e,n){"use strict";n("7aaa")},"342f":function(t,e,n){var r=n("d066");t.exports=r("navigator","userAgent")||""},"35a1":function(t,e,n){var r=n("f5df"),o=n("3f8c"),i=n("b622"),c=i("iterator");t.exports=function(t){if(void 0!=t)return t[c]||t["@@iterator"]||o[r(t)]}},"37e8":function(t,e,n){var r=n("83ab"),o=n("9bf2"),i=n("825a"),c=n("df75");t.exports=r?Object.defineProperties:function(t,e){i(t);var n,r=c(e),a=r.length,s=0;while(a>s)o.f(t,n=r[s++],e[n]);return t}},"3bbe":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3c4e":function(t,e,n){"use strict";var r=function(t){return o(t)&&!i(t)};function o(t){return!!t&&"object"===typeof t}function i(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||s(t)}var c="function"===typeof Symbol&&Symbol.for,a=c?Symbol.for("react.element"):60103;function s(t){return t.$$typeof===a}function u(t){return Array.isArray(t)?[]:{}}function l(t,e){var n=e&&!0===e.clone;return n&&r(t)?h(u(t),t,e):t}function f(t,e,n){var o=t.slice();return e.forEach((function(e,i){"undefined"===typeof o[i]?o[i]=l(e,n):r(e)?o[i]=h(t[i],e,n):-1===t.indexOf(e)&&o.push(l(e,n))})),o}function d(t,e,n){var o={};return r(t)&&Object.keys(t).forEach((function(e){o[e]=l(t[e],n)})),Object.keys(e).forEach((function(i){r(e[i])&&t[i]?o[i]=h(t[i],e[i],n):o[i]=l(e[i],n)})),o}function h(t,e,n){var r=Array.isArray(e),o=Array.isArray(t),i=n||{arrayMerge:f},c=r===o;if(c){if(r){var a=i.arrayMerge||f;return a(t,e,n)}return d(t,e,n)}return l(e,n)}h.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return h(t,n,e)}))};var p=h;t.exports=p},"3ca3":function(t,e,n){"use strict";var r=n("6547").charAt,o=n("577e"),i=n("69f3"),c=n("7dd0"),a="String Iterator",s=i.set,u=i.getterFor(a);c(String,"String",(function(t){s(this,{type:a,string:o(t),index:0})}),(function(){var t,e=u(this),n=e.string,o=e.index;return o>=n.length?{value:void 0,done:!0}:(t=r(n,o),e.index+=t.length,{value:t,done:!1})}))},"3f8c":function(t,e){t.exports={}},"428f":function(t,e,n){var r=n("da84");t.exports=r},"44ad":function(t,e,n){var r=n("d039"),o=n("c6b6"),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?i.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var r=n("b622"),o=n("7c73"),i=n("9bf2"),c=r("unscopables"),a=Array.prototype;void 0==a[c]&&i.f(a,c,{configurable:!0,value:o(null)}),t.exports=function(t){a[c][t]=!0}},"485a":function(t,e,n){var r=n("861d");t.exports=function(t,e){var n,o;if("string"===e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if("string"!==e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},4930:function(t,e,n){var r=n("2d00"),o=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"4d64":function(t,e,n){var r=n("fc6a"),o=n("50c4"),i=n("23cb"),c=function(t){return function(e,n,c){var a,s=r(e),u=o(s.length),l=i(c,u);if(t&&n!=n){while(u>l)if(a=s[l++],a!=a)return!0}else for(;u>l;l++)if((t||l in s)&&s[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:c(!0),indexOf:c(!1)}},"4de4":function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").filter,i=n("1dde"),c=i("filter");r({target:"Array",proto:!0,forced:!c},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,n){"use strict";var r=n("0366"),o=n("7b0b"),i=n("9bdd"),c=n("e95a"),a=n("50c4"),s=n("8418"),u=n("9a1f"),l=n("35a1");t.exports=function(t){var e,n,f,d,h,p,y=o(t),m="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,g=void 0!==b,x=l(y),k=0;if(g&&(b=r(b,v>2?arguments[2]:void 0,2)),void 0==x||m==Array&&c(x))for(e=a(y.length),n=new m(e);e>k;k++)p=g?b(y[k],k):y[k],s(n,k,p);else for(d=u(y,x),h=d.next,n=new m;!(f=h.call(d)).done;k++)p=g?i(d,b,[f.value,k],!0):f.value,s(n,k,p);return n.length=k,n}},"50c4":function(t,e,n){var r=n("a691"),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},5135:function(t,e,n){var r=n("7b0b"),o={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return o.call(r(t),e)}},5692:function(t,e,n){var r=n("c430"),o=n("c6cd");(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.17.3",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,n){var r=n("d066"),o=n("241c"),i=n("7418"),c=n("825a");t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(c(t)),n=i.f;return n?e.concat(n(t)):e}},"577e":function(t,e,n){var r=n("d9b5");t.exports=function(t){if(r(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),o=n("577e"),i=n("5899"),c="["+i+"]",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),u=function(t){return function(e){var n=o(r(e));return 1&t&&(n=n.replace(a,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6547:function(t,e,n){var r=n("a691"),o=n("577e"),i=n("1d80"),c=function(t){return function(e,n){var c,a,s=o(i(e)),u=r(n),l=s.length;return u<0||u>=l?t?"":void 0:(c=s.charCodeAt(u),c<55296||c>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):c:t?s.slice(u,u+2):a-56320+(c-55296<<10)+65536)}};t.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(t,e,n){var r=n("0b42");t.exports=function(t,e){return new(r(t))(0===e?0:e)}},"69f3":function(t,e,n){var r,o,i,c=n("7f9a"),a=n("da84"),s=n("861d"),u=n("9112"),l=n("5135"),f=n("c6cd"),d=n("f772"),h=n("d012"),p="Object already initialized",y=a.WeakMap,m=function(t){return i(t)?o(t):r(t,{})},v=function(t){return function(e){var n;if(!s(e)||(n=o(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(c||f.state){var b=f.state||(f.state=new y),g=b.get,x=b.has,k=b.set;r=function(t,e){if(x.call(b,t))throw new TypeError(p);return e.facade=t,k.call(b,t,e),e},o=function(t){return g.call(b,t)||{}},i=function(t){return x.call(b,t)}}else{var S=d("state");h[S]=!0,r=function(t,e){if(l(t,S))throw new TypeError(p);return e.facade=t,u(t,S,e),e},o=function(t){return l(t,S)?t[S]:{}},i=function(t){return l(t,S)}}t.exports={set:r,get:o,has:i,enforce:m,getterFor:v}},"6eeb":function(t,e,n){var r=n("da84"),o=n("9112"),i=n("5135"),c=n("ce4e"),a=n("8925"),s=n("69f3"),u=s.get,l=s.enforce,f=String(String).split("String");(t.exports=function(t,e,n,a){var s,u=!!a&&!!a.unsafe,d=!!a&&!!a.enumerable,h=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof e||i(n,"name")||o(n,"name",e),s=l(n),s.source||(s.source=f.join("string"==typeof e?e:""))),t!==r?(u?!h&&t[e]&&(d=!0):delete t[e],d?t[e]=n:o(t,e,n)):d?t[e]=n:c(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},7156:function(t,e,n){var r=n("861d"),o=n("d2bb");t.exports=function(t,e,n){var i,c;return o&&"function"==typeof(i=e.constructor)&&i!==n&&r(c=i.prototype)&&c!==n.prototype&&o(t,c),t}},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"746f":function(t,e,n){var r=n("428f"),o=n("5135"),i=n("e538"),c=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||c(e,t,{value:i.f(t)})}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(t,e,n){var r=n("cc12"),o=r("span").classList,i=o&&o.constructor&&o.constructor.prototype;t.exports=i===Object.prototype?void 0:i},"7aaa":function(t,e,n){},"7b0b":function(t,e,n){var r=n("1d80");t.exports=function(t){return Object(r(t))}},"7c73":function(t,e,n){var r,o=n("825a"),i=n("37e8"),c=n("7839"),a=n("d012"),s=n("1be4"),u=n("cc12"),l=n("f772"),f=">",d="<",h="prototype",p="script",y=l("IE_PROTO"),m=function(){},v=function(t){return d+p+f+t+d+"/"+p+f},b=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){var t,e=u("iframe"),n="java"+p+":";return e.style.display="none",s.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(v("document.F=Object")),t.close(),t.F},x=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}x="undefined"!=typeof document?document.domain&&r?b(r):g():b(r);var t=c.length;while(t--)delete x[h][c[t]];return x()};a[y]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(m[h]=o(t),n=new m,m[h]=null,n[y]=t):n=x(),void 0===e?n:i(n,e)}},"7db0":function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").find,i=n("44d2"),c="find",a=!0;c in[]&&Array(1)[c]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(c)},"7dd0":function(t,e,n){"use strict";var r=n("23e7"),o=n("9ed3"),i=n("e163"),c=n("d2bb"),a=n("d44e"),s=n("9112"),u=n("6eeb"),l=n("b622"),f=n("c430"),d=n("3f8c"),h=n("ae93"),p=h.IteratorPrototype,y=h.BUGGY_SAFARI_ITERATORS,m=l("iterator"),v="keys",b="values",g="entries",x=function(){return this};t.exports=function(t,e,n,l,h,k,S){o(n,e,l);var w,M,E,O=function(t){if(t===h&&L)return L;if(!y&&t in D)return D[t];switch(t){case v:return function(){return new n(this,t)};case b:return function(){return new n(this,t)};case g:return function(){return new n(this,t)}}return function(){return new n(this)}},C=e+" Iterator",_=!1,D=t.prototype,P=D[m]||D["@@iterator"]||h&&D[h],L=!y&&P||O(h),A="Array"==e&&D.entries||P;if(A&&(w=i(A.call(new t)),w!==Object.prototype&&w.next&&(f||i(w)===p||(c?c(w,p):"function"!=typeof w[m]&&s(w,m,x)),a(w,C,!0,!0),f&&(d[C]=x))),h==b&&P&&P.name!==b&&(_=!0,L=function(){return P.call(this)}),f&&!S||D[m]===L||s(D,m,L),d[e]=L,h)if(M={values:O(b),keys:k?L:O(v),entries:O(g)},S)for(E in M)(y||_||!(E in D))&&u(D,E,M[E]);else r({target:e,proto:!0,forced:y||_},M);return M}},"7f9a":function(t,e,n){var r=n("da84"),o=n("8925"),i=r.WeakMap;t.exports="function"===typeof i&&/native code/.test(o(i))},"825a":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(t,e,n){"use strict";var r=n("a04b"),o=n("9bf2"),i=n("5c6c");t.exports=function(t,e,n){var c=r(e);c in t?o.f(t,c,i(0,n)):t[c]=n}},"857a":function(t,e,n){var r=n("1d80"),o=n("577e"),i=/"/g;t.exports=function(t,e,n,c){var a=o(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+o(c).replace(i,"&quot;")+'"'),s+">"+a+"</"+e+">"}},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8875:function(t,e,n){var r,o,i;(function(n,c){o=[],r=c,i="function"===typeof r?r.apply(e,o):r,void 0===i||(t.exports=i)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(h){var n,r,o,i=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,c=/@([^@]*):(\d+):(\d+)\s*$/gi,a=i.exec(h.stack)||c.exec(h.stack),s=a&&a[1]||!1,u=a&&a[2]||!1,l=document.location.href.replace(document.location.hash,""),f=document.getElementsByTagName("script");s===l&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=n.replace(r,"$1").trim());for(var d=0;d<f.length;d++){if("interactive"===f[d].readyState)return f[d];if(f[d].src===s)return f[d];if(s===l&&f[d].innerHTML&&f[d].innerHTML.trim()===o)return f[d]}return null}}return t}))},8925:function(t,e,n){var r=n("c6cd"),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return o.call(t)}),t.exports=r.inspectSource},"90e3":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},9112:function(t,e,n){var r=n("83ab"),o=n("9bf2"),i=n("5c6c");t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},"94ca":function(t,e,n){var r=n("d039"),o=/#|\.prototype\./,i=function(t,e){var n=a[c(t)];return n==u||n!=s&&("function"==typeof e?r(e):!!e)},c=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},a=i.data={},s=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},9911:function(t,e,n){"use strict";var r=n("23e7"),o=n("857a"),i=n("af03");r({target:"String",proto:!0,forced:i("link")},{link:function(t){return o(this,"a","href",t)}})},"99af":function(t,e,n){"use strict";var r=n("23e7"),o=n("d039"),i=n("e8b5"),c=n("861d"),a=n("7b0b"),s=n("50c4"),u=n("8418"),l=n("65f0"),f=n("1dde"),d=n("b622"),h=n("2d00"),p=d("isConcatSpreadable"),y=9007199254740991,m="Maximum allowed index exceeded",v=h>=51||!o((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=f("concat"),g=function(t){if(!c(t))return!1;var e=t[p];return void 0!==e?!!e:i(t)},x=!v||!b;r({target:"Array",proto:!0,forced:x},{concat:function(t){var e,n,r,o,i,c=a(this),f=l(c,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?c:arguments[e],g(i)){if(o=s(i.length),d+o>y)throw TypeError(m);for(n=0;n<o;n++,d++)n in i&&u(f,d,i[n])}else{if(d>=y)throw TypeError(m);u(f,d++,i)}return f.length=d,f}})},"9a1f":function(t,e,n){var r=n("825a"),o=n("35a1");t.exports=function(t,e){var n=arguments.length<2?o(t):e;if("function"!=typeof n)throw TypeError(String(t)+" is not iterable");return r(n.call(t))}},"9bdd":function(t,e,n){var r=n("825a"),o=n("2a62");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(c){o(t,"throw",c)}}},"9bf2":function(t,e,n){var r=n("83ab"),o=n("0cfb"),i=n("825a"),c=n("a04b"),a=Object.defineProperty;e.f=r?a:function(t,e,n){if(i(t),e=c(e),i(n),o)try{return a(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9ed3":function(t,e,n){"use strict";var r=n("ae93").IteratorPrototype,o=n("7c73"),i=n("5c6c"),c=n("d44e"),a=n("3f8c"),s=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=o(r,{next:i(1,n)}),c(t,u,!1,!0),a[u]=s,t}},"9edc":function(t,e,n){"use strict";n("bbab")},a04b:function(t,e,n){var r=n("c04e"),o=n("d9b5");t.exports=function(t){var e=r(t,"string");return o(e)?e:String(e)}},a4d3:function(t,e,n){"use strict";var r=n("23e7"),o=n("da84"),i=n("d066"),c=n("c430"),a=n("83ab"),s=n("4930"),u=n("d039"),l=n("5135"),f=n("e8b5"),d=n("861d"),h=n("d9b5"),p=n("825a"),y=n("7b0b"),m=n("fc6a"),v=n("a04b"),b=n("577e"),g=n("5c6c"),x=n("7c73"),k=n("df75"),S=n("241c"),w=n("057f"),M=n("7418"),E=n("06cf"),O=n("9bf2"),C=n("d1e7"),_=n("9112"),D=n("6eeb"),P=n("5692"),L=n("f772"),A=n("d012"),j=n("90e3"),I=n("b622"),T=n("e538"),N=n("746f"),$=n("d44e"),Y=n("69f3"),X=n("b727").forEach,B=L("hidden"),W="Symbol",F="prototype",R=I("toPrimitive"),V=Y.set,U=Y.getterFor(W),G=Object[F],H=o.Symbol,K=i("JSON","stringify"),J=E.f,z=O.f,q=w.f,Q=C.f,Z=P("symbols"),tt=P("op-symbols"),et=P("string-to-symbol-registry"),nt=P("symbol-to-string-registry"),rt=P("wks"),ot=o.QObject,it=!ot||!ot[F]||!ot[F].findChild,ct=a&&u((function(){return 7!=x(z({},"a",{get:function(){return z(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=J(G,e);r&&delete G[e],z(t,e,n),r&&t!==G&&z(G,e,r)}:z,at=function(t,e){var n=Z[t]=x(H[F]);return V(n,{type:W,tag:t,description:e}),a||(n.description=e),n},st=function(t,e,n){t===G&&st(tt,e,n),p(t);var r=v(e);return p(n),l(Z,r)?(n.enumerable?(l(t,B)&&t[B][r]&&(t[B][r]=!1),n=x(n,{enumerable:g(0,!1)})):(l(t,B)||z(t,B,g(1,{})),t[B][r]=!0),ct(t,r,n)):z(t,r,n)},ut=function(t,e){p(t);var n=m(e),r=k(n).concat(pt(n));return X(r,(function(e){a&&!ft.call(n,e)||st(t,e,n[e])})),t},lt=function(t,e){return void 0===e?x(t):ut(x(t),e)},ft=function(t){var e=v(t),n=Q.call(this,e);return!(this===G&&l(Z,e)&&!l(tt,e))&&(!(n||!l(this,e)||!l(Z,e)||l(this,B)&&this[B][e])||n)},dt=function(t,e){var n=m(t),r=v(e);if(n!==G||!l(Z,r)||l(tt,r)){var o=J(n,r);return!o||!l(Z,r)||l(n,B)&&n[B][r]||(o.enumerable=!0),o}},ht=function(t){var e=q(m(t)),n=[];return X(e,(function(t){l(Z,t)||l(A,t)||n.push(t)})),n},pt=function(t){var e=t===G,n=q(e?tt:m(t)),r=[];return X(n,(function(t){!l(Z,t)||e&&!l(G,t)||r.push(Z[t])})),r};if(s||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?b(arguments[0]):void 0,e=j(t),n=function(t){this===G&&n.call(tt,t),l(this,B)&&l(this[B],e)&&(this[B][e]=!1),ct(this,e,g(1,t))};return a&&it&&ct(G,e,{configurable:!0,set:n}),at(e,t)},D(H[F],"toString",(function(){return U(this).tag})),D(H,"withoutSetter",(function(t){return at(j(t),t)})),C.f=ft,O.f=st,E.f=dt,S.f=w.f=ht,M.f=pt,T.f=function(t){return at(I(t),t)},a&&(z(H[F],"description",{configurable:!0,get:function(){return U(this).description}}),c||D(G,"propertyIsEnumerable",ft,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:H}),X(k(rt),(function(t){N(t)})),r({target:W,stat:!0,forced:!s},{for:function(t){var e=b(t);if(l(et,e))return et[e];var n=H(e);return et[e]=n,nt[n]=e,n},keyFor:function(t){if(!h(t))throw TypeError(t+" is not a symbol");if(l(nt,t))return nt[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!s,sham:!a},{create:lt,defineProperty:st,defineProperties:ut,getOwnPropertyDescriptor:dt}),r({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:ht,getOwnPropertySymbols:pt}),r({target:"Object",stat:!0,forced:u((function(){M.f(1)}))},{getOwnPropertySymbols:function(t){return M.f(y(t))}}),K){var yt=!s||u((function(){var t=H();return"[null]"!=K([t])||"{}"!=K({a:t})||"{}"!=K(Object(t))}));r({target:"JSON",stat:!0,forced:yt},{stringify:function(t,e,n){var r,o=[t],i=1;while(arguments.length>i)o.push(arguments[i++]);if(r=e,(d(e)||void 0!==t)&&!h(t))return f(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!h(e))return e}),o[1]=e,K.apply(null,o)}})}H[F][R]||_(H[F],R,H[F].valueOf),$(H,W),A[B]=!0},a630:function(t,e,n){var r=n("23e7"),o=n("4df4"),i=n("1c7e"),c=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:c},{from:o})},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},a9e3:function(t,e,n){"use strict";var r=n("83ab"),o=n("da84"),i=n("94ca"),c=n("6eeb"),a=n("5135"),s=n("c6b6"),u=n("7156"),l=n("d9b5"),f=n("c04e"),d=n("d039"),h=n("7c73"),p=n("241c").f,y=n("06cf").f,m=n("9bf2").f,v=n("58a8").trim,b="Number",g=o[b],x=g.prototype,k=s(h(x))==b,S=function(t){if(l(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,r,o,i,c,a,s,u=f(t,"number");if("string"==typeof u&&u.length>2)if(u=v(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(i=u.slice(2),c=i.length,a=0;a<c;a++)if(s=i.charCodeAt(a),s<48||s>o)return NaN;return parseInt(i,r)}return+u};if(i(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var w,M=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof M&&(k?d((function(){x.valueOf.call(n)})):s(n)!=b)?u(new g(S(e)),n,M):S(e)},E=r?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),O=0;E.length>O;O++)a(g,w=E[O])&&!a(M,w)&&m(M,w,y(g,w));M.prototype=x,x.constructor=M,c(o,b,M)}},ae93:function(t,e,n){"use strict";var r,o,i,c=n("d039"),a=n("7c73"),s=n("e163"),u=n("9112"),l=n("b622"),f=n("c430"),d=l("iterator"),h=!1;[].keys&&(i=[].keys(),"next"in i?(o=s(s(i)),o!==Object.prototype&&(r=o)):h=!0);var p=void 0==r||c((function(){var t={};return r[d].call(t)!==t}));p?r={}:f&&(r=a(r)),"function"!==typeof r[d]&&u(r,d,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},af03:function(t,e,n){var r=n("d039");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b041:function(t,e,n){"use strict";var r=n("00ee"),o=n("f5df");t.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},b0c0:function(t,e,n){var r=n("83ab"),o=n("9bf2").f,i=Function.prototype,c=i.toString,a=/^\s*function ([^ (]*)/,s="name";r&&!(s in i)&&o(i,s,{configurable:!0,get:function(){try{return c.call(this).match(a)[1]}catch(t){return""}}})},b622:function(t,e,n){var r=n("da84"),o=n("5692"),i=n("5135"),c=n("90e3"),a=n("4930"),s=n("fdbf"),u=o("wks"),l=r.Symbol,f=s?l:l&&l.withoutSetter||c;t.exports=function(t){return i(u,t)&&(a||"string"==typeof u[t])||(a&&i(l,t)?u[t]=l[t]:u[t]=f("Symbol."+t)),u[t]}},b727:function(t,e,n){var r=n("0366"),o=n("44ad"),i=n("7b0b"),c=n("50c4"),a=n("65f0"),s=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,l=4==t,f=6==t,d=7==t,h=5==t||f;return function(p,y,m,v){for(var b,g,x=i(p),k=o(x),S=r(y,m,3),w=c(k.length),M=0,E=v||a,O=e?E(p,w):n||d?E(p,0):void 0;w>M;M++)if((h||M in k)&&(b=k[M],g=S(b,M,x),t))if(e)O[M]=g;else if(g)switch(t){case 3:return!0;case 5:return b;case 6:return M;case 2:s.call(O,b)}else switch(t){case 4:return!1;case 7:s.call(O,b)}return f?-1:u||l?l:O}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},bbab:function(t,e,n){},c04e:function(t,e,n){var r=n("861d"),o=n("d9b5"),i=n("485a"),c=n("b622"),a=c("toPrimitive");t.exports=function(t,e){if(!r(t)||o(t))return t;var n,c=t[a];if(void 0!==c){if(void 0===e&&(e="default"),n=c.call(t,e),!r(n)||o(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),i(t,e)}},c430:function(t,e){t.exports=!1},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var r=n("da84"),o=n("ce4e"),i="__core-js_shared__",c=r[i]||o(i,{});t.exports=c},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},ca84:function(t,e,n){var r=n("5135"),o=n("fc6a"),i=n("4d64").indexOf,c=n("d012");t.exports=function(t,e){var n,a=o(t),s=0,u=[];for(n in a)!r(c,n)&&r(a,n)&&u.push(n);while(e.length>s)r(a,n=e[s++])&&(~i(u,n)||u.push(n));return u}},cc12:function(t,e,n){var r=n("da84"),o=n("861d"),i=r.document,c=o(i)&&o(i.createElement);t.exports=function(t){return c?i.createElement(t):{}}},ce4e:function(t,e,n){var r=n("da84");t.exports=function(t,e){try{Object.defineProperty(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("da84"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t]):r[t]&&r[t][e]}},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},d28b:function(t,e,n){var r=n("746f");r("iterator")},d2bb:function(t,e,n){var r=n("825a"),o=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(i){}return function(n,i){return r(n),o(i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},d3b7:function(t,e,n){var r=n("00ee"),o=n("6eeb"),i=n("b041");r||o(Object.prototype,"toString",i,{unsafe:!0})},d44e:function(t,e,n){var r=n("9bf2").f,o=n("5135"),i=n("b622"),c=i("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,c)&&r(t,c,{configurable:!0,value:e})}},d81d:function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").map,i=n("1dde"),c=i("map");r({target:"Array",proto:!0,forced:!c},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},d9b5:function(t,e,n){var r=n("d066"),o=n("fdbf");t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return"function"==typeof e&&Object(t)instanceof e}},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},ddb0:function(t,e,n){var r=n("da84"),o=n("fdbc"),i=n("785a"),c=n("e260"),a=n("9112"),s=n("b622"),u=s("iterator"),l=s("toStringTag"),f=c.values,d=function(t,e){if(t){if(t[u]!==f)try{a(t,u,f)}catch(r){t[u]=f}if(t[l]||a(t,l,e),o[e])for(var n in c)if(t[n]!==c[n])try{a(t,n,c[n])}catch(r){t[n]=c[n]}}};for(var h in o)d(r[h]&&r[h].prototype,h);d(i,"DOMTokenList")},df75:function(t,e,n){var r=n("ca84"),o=n("7839");t.exports=Object.keys||function(t){return r(t,o)}},e01a:function(t,e,n){"use strict";var r=n("23e7"),o=n("83ab"),i=n("da84"),c=n("5135"),a=n("861d"),s=n("9bf2").f,u=n("e893"),l=i.Symbol;if(o&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new l(t):void 0===t?l():l(t);return""===t&&(f[e]=!0),e};u(d,l);var h=d.prototype=l.prototype;h.constructor=d;var p=h.toString,y="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;s(h,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=p.call(t);if(c(f,t))return"";var n=y?e.slice(7,-1):e.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:d})}},e163:function(t,e,n){var r=n("5135"),o=n("7b0b"),i=n("f772"),c=n("e177"),a=i("IE_PROTO"),s=Object.prototype;t.exports=c?Object.getPrototypeOf:function(t){return t=o(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},e177:function(t,e,n){var r=n("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,n){"use strict";var r=n("fc6a"),o=n("44d2"),i=n("3f8c"),c=n("69f3"),a=n("7dd0"),s="Array Iterator",u=c.set,l=c.getterFor(s);t.exports=a(Array,"Array",(function(t,e){u(this,{type:s,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},e538:function(t,e,n){var r=n("b622");e.f=r},e893:function(t,e,n){var r=n("5135"),o=n("56ef"),i=n("06cf"),c=n("9bf2");t.exports=function(t,e){for(var n=o(e),a=c.f,s=i.f,u=0;u<n.length;u++){var l=n[u];r(t,l)||a(t,l,s(e,l))}}},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e95a:function(t,e,n){var r=n("b622"),o=n("3f8c"),i=r("iterator"),c=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||c[i]===t)}},f5df:function(t,e,n){var r=n("00ee"),o=n("c6b6"),i=n("b622"),c=i("toStringTag"),a="Arguments"==o(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(n){}};t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),c))?n:a?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r}},f772:function(t,e,n){var r=n("5692"),o=n("90e3"),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},fb15:function(t,e,n){"use strict";if(n.r(e),"undefined"!==typeof window){var r=window.document.currentScript,o=n("8875");r=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var i=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(n.p=i[1])}var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-container"},[n("VueLink",{attrs:{lines:t.lines,scale:t.scale},on:{update:t.updateLink}}),t._l(t.blocks,(function(e){return n("VueBlock",t._b({key:e.id,attrs:{options:t.optionsForChild},on:{update:t.updateScene,linkingStart:function(n){return t.linkingStart(e,n)},linkingStop:function(n){return t.linkingStop(e,n)},linkingBreak:function(n){return t.linkingBreak(e,n)},select:function(n){return t.blockSelect(e)},selected:function(n){return t.blockSelected(e)},delete:function(n){return t.blockDelete(e)},edit:function(n){return t.blockEdit(e)},blockDblClick:function(e){return t.$emit("blockDblClick")},draggingBlock:t.draggingBlock}},"VueBlock",e,!1,!0))}))],2)},a=[];function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t){if(Array.isArray(t))return s(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("e260"),n("3ca3"),n("ddb0"),n("a630");function l(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n("fb6a"),n("b0c0");function f(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t){return u(t)||l(t)||f(t)||d()}function p(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=f(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==n["return"]||n["return"]()}finally{if(a)throw i}}}}n("7db0"),n("4de4"),n("99af"),n("d81d"),n("159b");var y=n("3c4e"),m=n.n(y),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-block",class:{selected:t.selected},style:t.blockStyle,on:{dblclick:function(e){return t.$emit("blockDblClick")}}},[n("header",{style:t.headerStyle},[t._v(" "+t._s(t.title)+" "),t.selected?n("a",{staticClass:"edit",style:"color:"+t.left_icon_color,on:{click:t.editBlock}},[n("i",{class:"mdi "+t.left_icon})]):t._e(),n("a",{staticClass:"delete",style:"color:"+t.right_icon_color,on:{click:t.deleteBlock}},[n("i",{class:"mdi "+t.right_icon})])]),n("div",{staticClass:"inputs",style:"width:"+t.left_width+"; text-align:"+t.left_align},t._l(t.inputs,(function(e,r){return n("div",{key:r,staticClass:"input",attrs:{title:e.label}},[n("div",{class:[e.shape||"circle",e.active?"active":"","inputSlot"],style:e.color?"background:"+e.color+";":e.colort?"border-bottom-color:"+e.colort+";":"",on:{mouseup:function(e){return t.slotMouseUp(e,r)},mousedown:function(e){return t.slotBreak(e,r)}}}),t._v(" "+t._s(e.label)+" ")])})),0),n("div",{staticClass:"outputs",style:"width:"+t.right_width+"; text-align:"+t.right_align},t._l(t.outputs,(function(e,r){return n("div",{key:r,staticClass:"output",attrs:{title:e.label}},[n("div",{class:[e.shape||"circle",e.active?"active":"","outputSlot"],style:e.color?"background:"+e.color+";":e.colort?"border-bottom-color:"+e.colort+";":"",on:{mousedown:function(e){return t.slotMouseDown(e,r)}}}),t._v(" "+t._s(e.label)+" ")])})),0)])},b=[],g=(n("a9e3"),{name:"VueBlock",props:{id:Number,x:{type:Number,default:0,validator:function(t){return"number"===typeof t}},y:{type:Number,default:0,validator:function(t){return"number"===typeof t}},selected:Boolean,color:{type:String,default:""},background:{type:String,default:""},width:{type:Number,default:200},title:{type:String,default:"Title"},description:{type:String,default:"Title"},dragging:{type:Boolean,default:!1},inputs:Array,outputs:Array,left_icon:{type:String,default:"mdi-pen"},left_icon_color:{type:String,default:"#fff"},right_icon:{type:String,default:"mdi-close"},right_icon_color:{type:String,default:"#f00"},left_width:{type:String,default:"50%"},right_width:{type:String,default:"53%"},left_align:{type:String,default:"left"},right_align:{type:String,default:"right"},options:{type:Object}},data:function(){return{hasDragged:!1}},watch:{},computed:{blockStyle:function(){var t={top:this.options.center.y+this.y*this.options.scale+"px",left:this.options.center.x+this.x*this.options.scale+"px",width:this.width+"px",border:"2px solid #FFaa77",transform:"scale("+this.options.scale+")",transformOrigin:"top left"};return this.background&&(t.background=this.background),this.color&&(t.border="2px solid "+this.color),t},headerStyle:function(){var t={height:this.options.titleHeight+"px"};return this.color&&(t.background=this.color),t}},created:function(){this.mouseX=0,this.mouseY=0,this.lastMouseX=0,this.lastMouseY=0,this.linking=!1,this.isMouseDown=!1},mounted:function(){document.documentElement.addEventListener("mousemove",this.handleMove,!0),document.documentElement.addEventListener("mousedown",this.handleDown,!0),document.documentElement.addEventListener("mouseup",this.handleUp,!0)},beforeDestroy:function(){document.documentElement.removeEventListener("mousemove",this.handleMove,!0),document.documentElement.removeEventListener("mousedown",this.handleDown,!0),document.documentElement.removeEventListener("mouseup",this.handleUp,!0)},methods:{handleMove:function(t){if(this.isMouseDown&&(this.mouseX=t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouseY=t.pageY||t.clientY+document.documentElement.scrollTop,this.dragging&&!this.linking)){var e=this.mouseX-this.lastMouseX,n=this.mouseY-this.lastMouseY;(Math.abs(e)>5||Math.abs(n)>5||this.hasDragged)&&(this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.moveWithDiff(e,n),this.hasDragged=!0)}},handleDown:function(t){this.isMouseDown=!0,this.mouseX=t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouseY=t.pageY||t.clientY+document.documentElement.scrollTop,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY;var e=t.target||t.srcElement;this.$el.contains(e)&&1===t.which&&(e.className.indexOf("inputSlot")>-1||e.className.indexOf("outputSlot")>-1||e.className.indexOf("delete")>-1||(this.$emit("selected"),this.$emit("draggingBlock",!0)),t.preventDefault&&t.preventDefault())},handleUp:function(t){this.isMouseDown=!1;var e=t.target||t.srcElement;this.$el.contains(e)&&1===t.which&&(e.className.indexOf("inputSlot")>-1||e.className.indexOf("outputSlot")>-1||e.className.indexOf("delete")>-1||this.$emit("select")),this.dragging&&(this.$emit("draggingBlock",!1),this.hasDragged&&(this.save(),this.hasDragged=!1)),this.linking&&(this.linking=!1)},slotMouseDown:function(t,e){this.linking=!0,this.$emit("linkingStart",e),t.preventDefault&&t.preventDefault()},slotMouseUp:function(t,e){this.$emit("linkingStop",e),t.preventDefault&&t.preventDefault()},slotBreak:function(t,e){this.linking=!0,this.$emit("linkingBreak",e),t.preventDefault&&t.preventDefault()},save:function(){this.$emit("update")},deleteBlock:function(){this.$emit("delete")},editBlock:function(){this.$emit("edit")},moveWithDiff:function(t,e){var n=this.x+t/this.options.scale,r=this.y+e/this.options.scale;this.$emit("update:x",n),this.$emit("update:y",r)}}}),x=g;n("2f2c");function k(t,e,n,r,o,i,c,a){var s,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),c?(s=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(c)},u._ssrRegister=s):o&&(s=a?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),s)if(u.functional){u._injectStyles=s;var l=u.render;u.render=function(t,e){return s.call(e),l(t,e)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,s):[s]}return{exports:t,options:u}}var S=k(x,v,b,!1,null,"d6474fc0",null),w=S.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"100%",height:"100%"}},[t._l(t.renderedPathes,(function(e,r){return n("g",{key:"g"+r,on:{mouseenter:t.mouseEnter,mouseleave:t.mouseLeave}},t._l(e,(function(t,e){return n("path",{key:"p"+e,style:t.style,attrs:{d:t.data,color:t.style.stroke}})})),0)})),n("g",t._l(t.renderedArrows,(function(e,r){return n("path",{key:r,style:e.style,attrs:{ndx:e.ndx,d:"M -1 -1 L 0 1 L 1 -1 z",color:e.style.stroke,transform:e.transform},on:{mouseenter:t.mouseArrowEnter,mouseleave:t.mouseArrowLeave,click:t.mouseArrowClick}})})),0)],2)},E=[],O=(n("9911"),{props:{lines:{type:Array,default:function(){return[]}},scale:{type:Number,default:1}},data:function(){return{outline:!1}},methods:{mouseEnter:function(t){var e,n=p(t.target.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.style="stroke: #FF0000; stroke-width: "+8*this.scale+"; fill: none;"}}catch(o){n.e(o)}finally{n.f()}},mouseLeave:function(t){var e,n=p(t.target.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.style="stroke: "+r.attributes.color.value+"; stroke-width: "+4*this.scale+"; fill: none;"}}catch(o){n.e(o)}finally{n.f()}},mouseArrowEnter:function(t){var e=t.target;e.style="stroke: #FF0000; stroke-width: "+12*this.scale+"; fill: none;"},mouseArrowLeave:function(t){var e=t.target;e.style="stroke: "+e.attributes.color.value+"; stroke-width: "+8*this.scale+"; fill: none;"},mouseArrowClick:function(t){var e=t.target.attributes.ndx.value,n=this.lines[e].link;n.type+=1,n.type>2&&(n.type=0),this.$emit("update",n)},distance:function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},computeConnectionPoint:function(t,e,n,r,o){var i=.3*this.distance(t,e,n,r),c={x:t,y:e},a={x:t+i,y:e},s={x:n-i,y:r},u={x:n,y:r},l=(1-o)*(1-o)*(1-o),f=(1-o)*(1-o)*3*o,d=3*(1-o)*(o*o),h=o*o*o,p=l*c.x+f*a.x+d*s.x+h*u.x,y=l*c.y+f*a.y+d*s.y+h*u.y;return{x:p,y:y}},computeConnectionPoint1:function(t,e,n,r,o){var i=this.distance(t,e,n,r),c={x:t,y:e},a={x:t+Math.min(i,200),y:e},s={x:n+Math.min(i,200),y:r},u={x:n,y:r},l=(1-o)*(1-o)*(1-o),f=(1-o)*(1-o)*3*o,d=3*(1-o)*(o*o),h=o*o*o,p=l*c.x+f*a.x+d*s.x+h*u.x,y=l*c.y+f*a.y+d*s.y+h*u.y;return{x:p,y:y}},computeConnectionPoint2:function(t,e,n,r,o){var i=.3*this.distance(t,e,n,r),c={x:t,y:e},a={x:t-Math.min(3*i,2e3),y:e},s={x:n-Math.min(i,200),y:r},u={x:n,y:r},l=(1-o)*(1-o)*(1-o),f=(1-o)*(1-o)*3*o,d=3*(1-o)*(o*o),h=o*o*o,p=l*c.x+f*a.x+d*s.x+h*u.x,y=l*c.y+f*a.y+d*s.y+h*u.y;return{x:p,y:y}},calcLineLength:function(t,e,n,r){return Math.sqrt(Math.pow(r-e,2)+Math.pow(n-t,2))}},computed:{renderedPathes:function(){var t=this;if(!this.lines)return[];var e=[];return this.lines.forEach((function(n){var r=[],o=.3*t.distance(n.x1,n.y1,n.x2,n.y2);if(n.x2-n.x1<-120*t.scale){var i=Math.abs(n.y1-n.y2);if(n.link||(n.link={type:0}),0==n.link.type){n.ax=n.x1+5,n.bx=n.x2-5;var c=1,a=1;n.y1+-80*t.scale+20*(n.max-n.link.originSlot)*t.scale<n.y2?(n.ay=n.y2+160*t.scale+4*(n.max-n.link.originSlot)*t.scale+Math.min(.1*i,40),n.by=n.y2+160*t.scale+4*(n.max-n.link.originSlot)*t.scale+Math.min(.1*i,40),c=-1,a=-1):(n.ay=n.y1+80*t.scale+18*(n.max-n.link.originSlot)*t.scale,n.by=n.y1+80*t.scale+18*(n.max-n.link.originSlot)*t.scale,c=-1,a=1),r.push({data:"M ".concat(n.x1,", ").concat(n.y1," C ").concat(n.x1+(200+6*n.link.originSlot*c)*t.scale,", ").concat(n.y1,", ").concat(n.ax+(200+6*n.link.originSlot*c)*t.scale,", ").concat(n.ay,", ").concat(n.ax,", ").concat(n.ay),style:n.style,outlineStyle:n.outlineStyle}),r.push({data:"M ".concat(n.ax,", ").concat(n.ay," C ").concat(n.ax-80*t.scale,", ").concat(n.ay,", ").concat(n.bx+80*t.scale,", ").concat(n.by,", ").concat(n.bx,", ").concat(n.by),style:n.style,outlineStyle:n.outlineStyle}),r.push({data:"M ".concat(n.bx,", ").concat(n.by," C ").concat(n.bx-(200+6*n.link.originSlot*a)*t.scale,", ").concat(n.by,", ").concat(n.x2-(200+6*n.link.originSlot*a)*t.scale,", ").concat(n.y2,", ").concat(n.x2,", ").concat(n.y2),style:n.style,outlineStyle:n.outlineStyle})}if(1==n.link.type){n.ax=n.x1+5,n.bx=n.x2-5;var s=1,u=1;n.y1-80*t.scale+20*(n.max-n.link.originSlot)*t.scale>n.y2?(n.ay=n.y2-160*t.scale+4*(n.max-n.link.originSlot)*t.scale-Math.min(.1*i,40),n.by=n.y2-160*t.scale+4*(n.max-n.link.originSlot)*t.scale-Math.min(.1*i,40),s=1,u=1):(n.ay=n.y1-80*t.scale-18*(n.max+n.link.originSlot-2)*t.scale,n.by=n.y1-80*t.scale-18*(n.max+n.link.originSlot-2)*t.scale,s=1,u=-1),r.push({data:"M ".concat(n.x1,", ").concat(n.y1," C ").concat(n.x1+(200+6*n.link.originSlot*s)*t.scale,", ").concat(n.y1,", ").concat(n.ax+(200+6*n.link.originSlot*s)*t.scale,", ").concat(n.ay,", ").concat(n.ax,", ").concat(n.ay),style:n.style,outlineStyle:n.outlineStyle}),r.push({data:"M ".concat(n.ax,", ").concat(n.ay," C ").concat(n.ax-80*t.scale,", ").concat(n.ay,", ").concat(n.bx+80*t.scale,", ").concat(n.by,", ").concat(n.bx,", ").concat(n.by),style:n.style,outlineStyle:n.outlineStyle}),r.push({data:"M ".concat(n.bx,", ").concat(n.by," C ").concat(n.bx-(200+6*n.link.originSlot*u)*t.scale,", ").concat(n.by,", ").concat(n.x2-(200+6*n.link.originSlot*u)*t.scale,", ").concat(n.y2,", ").concat(n.x2,", ").concat(n.y2),style:n.style,outlineStyle:n.outlineStyle})}2==n.link.type&&(n.ax=n.x1+5,n.bx=n.x2-5,n.ay=(n.y1+n.y2-20*n.link.originSlot*t.scale)/2,n.by=(n.y1+n.y2-20*n.link.originSlot*t.scale)/2,r.push({data:"M ".concat(n.x1,", ").concat(n.y1," C ").concat(n.x1+180*t.scale,", ").concat(n.y1,", ").concat(n.ax+180*t.scale,", ").concat(n.ay,", ").concat(n.ax,", ").concat(n.ay),style:n.style,outlineStyle:n.outlineStyle}),r.push({data:"M ".concat(n.ax,", ").concat(n.ay," C ").concat(n.ax-180*t.scale,", ").concat(n.ay,", ").concat(n.bx+180*t.scale,", ").concat(n.by,", ").concat(n.bx,", ").concat(n.by),style:n.style,outlineStyle:n.outlineStyle}),r.push({data:"M ".concat(n.bx,", ").concat(n.by," C ").concat(n.bx-180*t.scale,", ").concat(n.by,", ").concat(n.x2-180*t.scale,", ").concat(n.y2,", ").concat(n.x2,", ").concat(n.y2),style:n.style,outlineStyle:n.outlineStyle}))}else r.push({data:"M ".concat(n.x1,", ").concat(n.y1," C ").concat(n.x1+o,", ").concat(n.y1,", ").concat(n.x2-o,", ").concat(n.y2,", ").concat(n.x2,", ").concat(n.y2),style:n.style,outlineStyle:n.outlineStyle});e.push(r)})),e},renderedArrows:function(){var t=this;if(!this.lines)return[];var e=[];return this.lines.forEach((function(n,r){var o,i,c,a;if(n.x2-n.x1<-120*t.scale){var s=Math.abs(n.y1-n.y2);n.link||(n.link={type:0}),0==n.link.type&&(n.ax=n.x1+5,n.bx=n.x2-5,n.y1+-80*t.scale+20*(n.max-n.link.originSlot)*t.scale<n.y2?(n.ay=n.y2+160*t.scale+4*(n.max-n.link.originSlot)*t.scale+Math.min(.1*s,40),n.by=n.y2+160*t.scale+4*(n.max-n.link.originSlot)*t.scale+Math.min(.1*s,40)):(n.ay=n.y1+80*t.scale+18*(n.max-n.link.originSlot)*t.scale,n.by=n.y1+80*t.scale+18*(n.max-n.link.originSlot)*t.scale),o=t.computeConnectionPoint2(n.ax,n.ay,n.bx,n.by,.01),i=t.computeConnectionPoint2(n.ax,n.ay,n.bx,n.by,.02),c=-Math.atan2(i.x-o.x,i.y-o.y),a=180*(c>=0?c:2*Math.PI+c)/Math.PI,e.push({ndx:r,transform:"translate(".concat(n.ax,", ").concat(n.ay,") rotate(").concat(a,")"),style:{stroke:n.style.stroke,strokeWidth:2*n.style.strokeWidth,fill:n.style.stroke}}),o=t.computeConnectionPoint2(n.bx,n.by,n.x2,n.y2,.01),i=t.computeConnectionPoint2(n.bx,n.by,n.x2,n.y2,.02),c=-Math.atan2(i.x-o.x,i.y-o.y),a=180*(c>=0?c:2*Math.PI+c)/Math.PI,e.push({ndx:r,transform:"translate(".concat(n.bx,", ").concat(n.by,") rotate(").concat(a,")"),style:{stroke:n.style.stroke,strokeWidth:2*n.style.strokeWidth,fill:n.style.stroke}})),1==n.link.type&&(n.ax=n.x1+5,n.bx=n.x2-5,n.y1-80*t.scale+20*(n.max-n.link.originSlot)*t.scale>n.y2?(n.ay=n.y2-160*t.scale+4*(n.max-n.link.originSlot)*t.scale-Math.min(.1*s,40),n.by=n.y2-160*t.scale+4*(n.max-n.link.originSlot)*t.scale-Math.min(.1*s,40)):(n.ay=n.y1-80*t.scale-18*(n.max+n.link.originSlot-2)*t.scale,n.by=n.y1-80*t.scale-18*(n.max+n.link.originSlot-2)*t.scale),o=t.computeConnectionPoint2(n.ax,n.ay,n.bx,n.by,.01),i=t.computeConnectionPoint2(n.ax,n.ay,n.bx,n.by,.02),c=-Math.atan2(i.x-o.x,i.y-o.y),a=180*(c>=0?c:2*Math.PI+c)/Math.PI,e.push({ndx:r,transform:"translate(".concat(n.ax,", ").concat(n.ay,") rotate(").concat(a,")"),style:{stroke:n.style.stroke,strokeWidth:2*n.style.strokeWidth,fill:n.style.stroke}}),o=t.computeConnectionPoint2(n.bx,n.by,n.x2,n.y2,.01),i=t.computeConnectionPoint2(n.bx,n.by,n.x2,n.y2,.02),c=-Math.atan2(i.x-o.x,i.y-o.y),a=180*(c>=0?c:2*Math.PI+c)/Math.PI,e.push({ndx:r,transform:"translate(".concat(n.bx,", ").concat(n.by,") rotate(").concat(a,")"),style:{stroke:n.style.stroke,strokeWidth:2*n.style.strokeWidth,fill:n.style.stroke}})),2==n.link.type&&(n.ax=n.x1+9,n.bx=n.x2-9,n.ay=(n.y1+n.y2-20*n.link.originSlot*t.scale)/2,n.by=(n.y1+n.y2-20*n.link.originSlot*t.scale)/2,o=t.computeConnectionPoint2(n.ax,n.ay,n.bx,n.by,.01),i=t.computeConnectionPoint2(n.ax,n.ay,n.bx,n.by,.02),c=-Math.atan2(i.x-o.x,i.y-o.y),a=180*(c>=0?c:2*Math.PI+c)/Math.PI,e.push({ndx:r,transform:"translate(".concat(n.ax,", ").concat(n.ay,") rotate(").concat(a,")"),style:{stroke:n.style.stroke,strokeWidth:2*n.style.strokeWidth,fill:n.style.stroke}}),o=t.computeConnectionPoint2(n.bx,n.by,n.x2,n.y2,.01),i=t.computeConnectionPoint2(n.bx,n.by,n.x2,n.y2,.02),c=-Math.atan2(i.x-o.x,i.y-o.y),a=180*(c>=0?c:2*Math.PI+c)/Math.PI,e.push({ndx:r,transform:"translate(".concat(n.bx,", ").concat(n.by,") rotate(").concat(a,")"),style:{stroke:n.style.stroke,strokeWidth:2*n.style.strokeWidth,fill:n.style.stroke}}))}else{var u=t.calcLineLength(n.x1,n.y1,n.x2,n.y2);u>300&&(o=t.computeConnectionPoint(n.x1,n.y1,n.x2,n.y2,.2),i=t.computeConnectionPoint(n.x1,n.y1,n.x2,n.y2,.21),c=-Math.atan2(i.x-o.x,i.y-o.y),a=180*(c>=0?c:2*Math.PI+c)/Math.PI,e.push({ndx:r,transform:"translate(".concat(o.x,", ").concat(o.y,") rotate(").concat(a,")"),style:{stroke:n.style.stroke,strokeWidth:2*n.style.strokeWidth,fill:n.style.stroke}})),o=t.computeConnectionPoint(n.x1,n.y1,n.x2,n.y2,.5),i=t.computeConnectionPoint(n.x1,n.y1,n.x2,n.y2,.51),c=-Math.atan2(i.x-o.x,i.y-o.y),a=180*(c>=0?c:2*Math.PI+c)/Math.PI,e.push({ndx:r,transform:"translate(".concat(o.x,", ").concat(o.y,") rotate(").concat(a,")"),style:{stroke:n.style.stroke,strokeWidth:2*n.style.strokeWidth,fill:n.style.stroke}}),u>300&&(o=t.computeConnectionPoint(n.x1,n.y1,n.x2,n.y2,.8),i=t.computeConnectionPoint(n.x1,n.y1,n.x2,n.y2,.81),c=-Math.atan2(i.x-o.x,i.y-o.y),a=180*(c>=0?c:2*Math.PI+c)/Math.PI,e.push({ndx:r,transform:"translate(".concat(o.x,", ").concat(o.y,") rotate(").concat(a,")"),style:{stroke:n.style.stroke,strokeWidth:2*n.style.strokeWidth,fill:n.style.stroke}}))}})),e}}}),C=O,_=k(C,M,E,!1,null,"a039bdd0",null),D=_.exports,P={name:"VueBlocksContainer",components:{VueBlock:w,VueLink:D},props:{blocksContent:{type:Array,default:function(){return[]}},scene:{type:Object,default:function(){return{blocks:[],links:[],container:{}}}},options:{type:Object}},mounted:function(){document.documentElement.addEventListener("mousemove",this.handleMove,!0),document.documentElement.addEventListener("mousedown",this.handleDown,!0),document.documentElement.addEventListener("mouseup",this.handleUp,!0),document.documentElement.addEventListener("wheel",this.handleWheel,!0),document.documentElement.addEventListener("keydown",this.handleKeyDown,!0),document.documentElement.addEventListener("keyup",this.handleKeyUp,!0),this.centerX=this.$el.clientWidth/2,this.centerY=this.$el.clientHeight/2,this.importBlocksContent(),this.importScene()},beforeDestroy:function(){document.documentElement.removeEventListener("mousemove",this.handleMove,!0),document.documentElement.removeEventListener("mousedown",this.handleDown,!0),document.documentElement.removeEventListener("mouseup",this.handleUp,!0),document.documentElement.removeEventListener("wheel",this.handleWheel,!0),document.documentElement.removeEventListener("keydown",this.handleKeyDown,!0),document.documentElement.removeEventListener("keyup",this.handleKeyUp,!0)},created:function(){this.mouseX=0,this.mouseY=0,this.lastMouseX=0,this.lastMouseY=0,this.minScale=.2,this.maxScale=1.5,this.linking=!1,this.linkStartData=null,this.inputSlotClassName="inputSlot",this.defaultScene={blocks:[],links:[],container:{}}},data:function(){return{dragging:!1,centerX:0,centerY:0,scale:1,nodes:[],blocks:[],links:[],tempLink:null,selectedBlocks:[],hasDragged:!1,hasShiftKey:!1,lineColors:["#58b50d","#2975b4","#9C69EF","#d1b221"]}},computed:{optionsForChild:function(){return{width:300,titleHeight:32,scale:this.scale,inputSlotClassName:this.inputSlotClassName,center:{x:this.centerX,y:this.centerY}}},container:function(){return{centerX:this.centerX,centerY:this.centerY,scale:this.scale}},lines:function(){var t,e=this,n=[],r=p(this.links);try{var o=function(){var r=t.value,o=e.blocks.find((function(t){return t.id===r.originID})),i=e.blocks.find((function(t){return t.id===r.targetID}));if(!o||!i)return console.log("Remove invalid link",r),e.removeLink(r.id),"continue";if(o.id===i.id)return console.log("Loop detected, remove link",r),e.removeLink(r.id),"continue";r.type||(r.type=0);var c=e.getConnectionPos(o,r.originSlot,!1),a=e.getConnectionPos(i,r.targetSlot,!0);if(!c||!a)return console.log("Remove invalid link (slot not exist)",r),e.removeLink(r.id),"continue";var s=r.originSlot;while(s>=4)s-=4;var u=e.lineColors[s];o.outputs[r.originSlot].lineColor&&(u=o.outputs[r.originSlot].lineColor);var l=c.x,f=c.y,d=a.x,h=a.y;n.push({link:r,max:Math.max(o.inputs.length,o.outputs.length),x1:l,y1:f,x2:d,y2:h,style:{stroke:u,strokeWidth:4*e.scale,fill:"none"},outlineStyle:{stroke:"#666",strokeWidth:6*e.scale,strokeOpacity:.6,fill:"none"}})};for(r.s();!(t=r.n()).done;)o()}catch(i){r.e(i)}finally{r.f()}return this.tempLink&&n.push(this.tempLink),n}},methods:{distance:function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},handleMove:function(t){var e=this.getMousePosition(this.$el,t);if(this.mouseX=e.x,this.mouseY=e.y,this.dragging){var n=this.mouseX-this.lastMouseX,r=this.mouseY-this.lastMouseY;this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.centerX+=n,this.centerY+=r,this.hasDragged=!0}if(this.linking&&this.linkStartData){var o=this.getConnectionPos(this.linkStartData.block,this.linkStartData.slotNumber,!1);this.tempLink={x1:o.x,y1:o.y,x2:this.mouseX,y2:this.mouseY,style:{stroke:"#8f8f8f",strokeWidth:4*this.scale,fill:"none"},max:Math.max(this.linkStartData.block.inputs.length,this.linkStartData.block.outputs.length),link:{originSlot:this.linkStartData.slotNumber,type:0}}}},handleDown:function(t){if(!window.editorMode){var e=t.target||t.srcElement;if((e===this.$el||e.matches("svg, svg *"))&&1===t.which){this.dragging=!0;var n=this.getMousePosition(this.$el,t);this.mouseX=n.x,this.mouseY=n.y,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.deselectAll(),t.preventDefault&&t.preventDefault()}}},handleUp:function(t){if(!window.editorMode){var e=t.target||t.srcElement;this.dragging&&(this.dragging=!1,this.hasDragged&&(this.updateScene(),this.hasDragged=!1)),!this.$el.contains(e)||"string"===typeof e.className&&-1!==e.className.indexOf(this.inputSlotClassName)||this.stopTempLinking()}},handleWheel:function(t){if(!window.editorMode){var e=t.target||t.srcElement;if(this.$el.contains(e)){var n=Math.pow(1.1,-.01*t.deltaY);if(this.scale*=n,this.scale<this.minScale)return void(this.scale=this.minScale);if(this.scale>this.maxScale)return void(this.scale=this.maxScale);var r={x:this.mouseX,y:this.mouseY},o=(r.x-this.centerX)*(n-1),i=(r.y-this.centerY)*(n-1);this.centerX-=o,this.centerY-=i,this.updateScene()}}},handleKeyDown:function(t){window.editorMode||16==t.keyCode&&(this.hasShiftKey=!0)},handleKeyUp:function(t){window.editorMode||(16==t.keyCode&&(this.hasShiftKey=!1),107==t.keyCode&&this.handleWheel({target:this.$el,deltaY:-200}),109==t.keyCode&&this.handleWheel({target:this.$el,deltaY:200}),37==t.keyCode&&(this.centerX+=100*this.scale),38==t.keyCode&&(this.centerY+=100*this.scale),39==t.keyCode&&(this.centerX-=100*this.scale),40==t.keyCode&&(this.centerY-=100*this.scale))},getMousePosition:function(t,e){var n=e.pageX||e.clientX+document.documentElement.scrollLeft,r=e.pageY||e.clientY+document.documentElement.scrollTop,o=this.getOffsetRect(t),i=n-o.left,c=r-o.top;return{x:i,y:c}},getOffsetRect:function(t){var e=t.getBoundingClientRect(),n=window.pageYOffset,r=window.pageXOffset,o=e.top+n,i=e.left+r;return{top:Math.round(o),left:Math.round(i)}},getConnectionPos:function(t,e,n){if(t&&-1!==e){var r=0,o=0;if(r+=t.x,o+=t.y,o+=this.optionsForChild.titleHeight,n&&t.inputs.length>e);else{if(n||!(t.outputs.length>e))return void console.error("slot "+e+" not found, is input: "+n,t);r+=t.width||200}return o+=18,o+=24*e,r*=this.scale,o*=this.scale,r+=this.centerX,o+=this.centerY,{x:r,y:o}}},linkingStart:function(t,e){var n=this.links.find((function(n){return n.originID===t.id&&n.originSlot===e}));this.links=this.links.filter((function(n){return!(n.originID===t.id&&n.originSlot===e)})),n&&(this.updateScene(),this.$emit("link_remove",n)),this.linkStartData={block:t,slotNumber:e};var r=this.getConnectionPos(this.linkStartData.block,this.linkStartData.slotNumber,!1);this.tempLink={x1:r.x,y1:r.y,x2:this.mouseX,y2:this.mouseY,style:{stroke:"#8f8f8f",strokeWidth:4*this.scale,fill:"none"},max:Math.max(this.linkStartData.block.inputs.length,this.linkStartData.block.outputs.length),link:{originSlot:this.linkStartData.slotNumber,type:0}},this.linking=!0},linkingStop:function(t,e){var n=this;if(this.linkStartData&&t&&e>-1){var r=this.links.find((function(r){return r.targetID===t.id&&r.targetSlot===e&&r.originID===n.linkStartData.block.id&&r.originSlot===n.linkStartData.slotNumber}));if(r)return this.stopTempLinking();var o=Math.max.apply(Math,[0].concat(h(this.links.map((function(t){return t.id})))));if(this.linkStartData.block.id==t.id)return this.stopTempLinking();if(t.inputs[e].type!==this.linkStartData.block.outputs[this.linkStartData.slotNumber].type)return this.stopTempLinking();var i={id:o+1,originID:this.linkStartData.block.id,originSlot:this.linkStartData.slotNumber,targetID:t.id,targetSlot:e,type:0};this.links.push(i),this.updateScene(),this.$emit("link_add",i)}this.stopTempLinking()},stopTempLinking:function(){this.linking=!1,this.tempLink=null,this.linkStartData=null},linkingBreak:function(t,e){if(t&&e>-1){var n=this.links.find((function(n){return n.targetID===t.id&&n.targetSlot===e}));if(n){var r=this.blocks.find((function(t){return t.id===n.originID}));this.links=this.links.filter((function(t){return!(t.id===n.id)})),this.linkingStart(r,n.originSlot),this.updateScene(),this.$emit("link_remove",n)}}},removeLink:function(t){var e=this.links.find((function(e){return e.id==t}));this.links=this.links.filter((function(e){return!(e.id===t)})),this.$emit("link_remove",e)},addNewBlock:function(t,e,n){var r=Math.max.apply(Math,[0].concat(h(this.blocks.map((function(t){return t.id}))))),o=this.nodes.find((function(e){return e.name===t}));if(o){var i=JSON.parse(JSON.stringify(o));i.id=r+1,i.selected=!1,delete i["family"],void 0===e||void 0===n?(e=(this.$el.clientWidth/2-this.centerX)/this.scale,n=(this.$el.clientHeight/2-this.centerY)/this.scale):(e=(e-this.centerX)/this.scale,n=(n-this.centerY)/this.scale),i.x=e,i.y=n,this.blocks.push(i),this.updateScene()}},addCopyBlock:function(t,e,n){this.deselectAll();var r=JSON.parse(JSON.stringify(t));r.id=1+Math.max.apply(Math,[0].concat(h(this.blocks.map((function(t){return t.id}))))),void 0!==e&&void 0!==n&&(r.x=e,r.y=n),this.blocks.push(r),this.selectedBlocks=[r],this.$emit("blockSelect",r),this.updateScene()},deselectAll:function(){this.selectedBlocks=[],this.blocks.forEach((function(t){t.selected=!1,t.dragging=!1})),this.$emit("blockDeselect")},blockSelected:function(t){this.hasShiftKey?this.selectedBlocks.push(t):(this.deselectAll(),this.selectedBlocks=[t]),t.selected=!0,t.dragging=!1},blockSelect:function(t){this.$emit("blockSelect",t)},draggingBlock:function(t){var e=this;this.selectedBlocks.forEach((function(n){var r=e.blocks.find((function(t){return n.id===t.id}));r&&(r.selected=!0,r.dragging=t)}))},blockDelete:function(t){var e=this,n=this.links.find((function(e){return e.originID===t.id||e.targetID===t.id}));n||(t.selected&&this.deselectAll(),this.links.forEach((function(n){n.originID!==t.id&&n.targetID!==t.id||e.removeLink(n.id)})),this.blocks=this.blocks.filter((function(e){return e.id!==t.id})),this.updateScene())},blockEdit:function(t){this.$emit("blockEdit",t)},prepareBlocks:function(t){var e=this;return t.map((function(t){var n=e.nodes.find((function(e){return e.name===t.name}));if(!n)return null;var r=JSON.parse(JSON.stringify(n));return r.id=t.id,r.selected=!1,r.x=0,r.y=0,delete r["family"],r=m()(r,t,{arrayMerge:function(t,e){return 0===e.length?t:e}}),r})).filter((function(t){return!!t}))},prepareBlocksLinking:function(t,e){if(!t)return[];var n=[];return t.forEach((function(t){var r=e.filter((function(e){return e.targetID===t.id})),o=e.filter((function(e){return e.originID===t.id}));t.inputs.forEach((function(e,n){t.inputs[n].active=r.some((function(t){return t.targetSlot===n}))})),t.outputs.forEach((function(e,n){t.outputs[n].active=o.some((function(t){return t.originSlot===n}))})),n.push(t)})),n},importBlocksContent:function(){this.blocksContent&&(this.nodes=m()([],this.blocksContent))},importScene:function(){var t=m()(this.defaultScene,this.scene),e=this.prepareBlocks(t.blocks);e=this.prepareBlocksLinking(e,t.links),this.selectedBlocks.forEach((function(t){var n=e.find((function(e){return t.id===e.id}));n&&(n.selected=!0,n.dragging=!1)})),this.blocks=e,this.links=m()([],t.links);var n=t.container;n.centerX&&(this.centerX=n.centerX),n.centerY&&(this.centerY=n.centerY),n.scale&&(this.scale=n.scale)},exportScene:function(){var t=m()([],this.blocks),e=t.map((function(t){return delete t["dragging"],delete t["selected"],t}));return{blocks:e,links:this.links,container:this.container}},updateScene:function(){this.$emit("update:scene",this.exportScene())},updateLink:function(t){var e=this.links.find((function(e){return e.id===t.id}));e.type=t.type,this.updateScene()}},watch:{blocksContent:function(){this.importBlocksContent()},scene:function(){this.importScene()}}},L=P,A=(n("9edc"),k(L,c,a,!1,null,"b38ef362",null)),j=A.exports;e["default"]=j},fb6a:function(t,e,n){"use strict";var r=n("23e7"),o=n("861d"),i=n("e8b5"),c=n("23cb"),a=n("50c4"),s=n("fc6a"),u=n("8418"),l=n("b622"),f=n("1dde"),d=f("slice"),h=l("species"),p=[].slice,y=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var n,r,l,f=s(this),d=a(f.length),m=c(t,d),v=c(void 0===e?d:e,d);if(i(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?o(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return p.call(f,m,v);for(r=new(void 0===n?Array:n)(y(v-m,0)),l=0;m<v;m++,l++)m in f&&u(r,l,f[m]);return r.length=l,r}})},fc6a:function(t,e,n){var r=n("44ad"),o=n("1d80");t.exports=function(t){return r(o(t))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var r=n("4930");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}})["default"]}));
